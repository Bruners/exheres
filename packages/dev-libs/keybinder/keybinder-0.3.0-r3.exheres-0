# Copyright 2013 Lasse Brun <bruners@gmail.com>
# Distributed under the terms of the GNU General Public License v2

SLOT="3.0"
require github [ user=engla tag=${PN}-${SLOT}-v${PV} ] autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.13 ] ] easy-multibuild

SUMMARY="Library for registering global keyboard shortcuts"
DESCRIPTION="Keybinder works with GTK-based applications using the X Window System"

LICENCES="GPL-2"
PLATFORMS="~amd64"
MYOPTIONS="gtk-doc gobject-introspection python
    multibuild_c: 32 64
"

DEPENDENCIES="
    build:
        dev-util/intltool
        virtual/pkg-config
        sys-devel/gettext[multibuild_c:*(-)?]
    build+run:
        gtk-doc? ( dev-doc/gtk-doc[>=0.14] )
        gobject-introspection? ( gnome-desktop/gobject-introspection[>=1.31.1] )
        dev-libs/glib:2[>=2.30][multibuild_c:*(-)?]
        x11-libs/gtk+:3[>=3][gobject-introspection?][multibuild_c:*(-)?]
    run:
        python? ( gnome-bindings/pygobject:2 )
"

BUGS_TO="bruners@gmail.com"

src_prepare() {
    edo gtkdocize
    autotools_src_prepare
}

configure_one_multibuild() {
    econf \
        $(option_enable gobject-introspection introspection) \
        $(option_enable gtk-doc)
}
